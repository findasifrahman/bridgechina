[build]
builder = "NIXPACKS"
# Don't use cd ../.. - instead, Railway should set root directory to repo root
# If root directory is set to "apps/web", change it to "." (repo root) in Railway dashboard
buildCommand = "pnpm install --frozen-lockfile && pnpm --filter @bridgechina/web build"

[deploy]
startCommand = "bash apps/web/start.sh"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

